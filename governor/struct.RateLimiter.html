<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A rate limiter."><title>RateLimiter in governor - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="governor" data-themes="" data-resource-suffix="" data-rustdoc-version="1.93.0-nightly (b01cc1cf0 2025-11-05)" data-channel="nightly" data-search-js="search-5c29b3b5.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">RateLimiter</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../governor/index.html">governor</a><span class="version">0.10.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Rate<wbr>Limiter</a></h2><h3><a href="#implementations">Methods</a></h3><ul class="block method"><li><a href="#method.check" title="check">check</a></li><li><a href="#method.check_key" title="check_key">check_key</a></li><li><a href="#method.check_key_n" title="check_key_n">check_key_n</a></li><li><a href="#method.check_n" title="check_n">check_n</a></li><li><a href="#method.clock" title="clock">clock</a></li><li><a href="#method.dashmap" title="dashmap">dashmap</a></li><li><a href="#method.dashmap_with_clock" title="dashmap_with_clock">dashmap_with_clock</a></li><li><a href="#method.dashmap_with_clock_and_hasher" title="dashmap_with_clock_and_hasher">dashmap_with_clock_and_hasher</a></li><li><a href="#method.dashmap_with_hasher" title="dashmap_with_hasher">dashmap_with_hasher</a></li><li><a href="#method.direct" title="direct">direct</a></li><li><a href="#method.direct_with_clock" title="direct_with_clock">direct_with_clock</a></li><li><a href="#method.hashmap" title="hashmap">hashmap</a></li><li><a href="#method.hashmap_with_clock" title="hashmap_with_clock">hashmap_with_clock</a></li><li><a href="#method.hashmap_with_clock_and_hasher" title="hashmap_with_clock_and_hasher">hashmap_with_clock_and_hasher</a></li><li><a href="#method.hashmap_with_hasher" title="hashmap_with_hasher">hashmap_with_hasher</a></li><li><a href="#method.into_state_store" title="into_state_store">into_state_store</a></li><li><a href="#method.is_empty" title="is_empty">is_empty</a></li><li><a href="#method.keyed" title="keyed">keyed</a></li><li><a href="#method.len" title="len">len</a></li><li><a href="#method.new" title="new">new</a></li><li><a href="#method.retain_recent" title="retain_recent">retain_recent</a></li><li><a href="#method.shrink_to_fit" title="shrink_to_fit">shrink_to_fit</a></li><li><a href="#method.until_key_n_ready" title="until_key_n_ready">until_key_n_ready</a></li><li><a href="#method.until_key_n_ready_with_jitter" title="until_key_n_ready_with_jitter">until_key_n_ready_with_jitter</a></li><li><a href="#method.until_key_ready" title="until_key_ready">until_key_ready</a></li><li><a href="#method.until_key_ready_with_jitter" title="until_key_ready_with_jitter">until_key_ready_with_jitter</a></li><li><a href="#method.until_n_ready" title="until_n_ready">until_n_ready</a></li><li><a href="#method.until_n_ready_with_jitter" title="until_n_ready_with_jitter">until_n_ready_with_jitter</a></li><li><a href="#method.until_ready" title="until_ready">until_ready</a></li><li><a href="#method.until_ready_with_jitter" title="until_ready_with_jitter">until_ready_with_jitter</a></li><li><a href="#method.with_middleware" title="with_middleware">with_middleware</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block trait-implementation"><li><a href="#impl-Debug-for-RateLimiter%3CK,+S,+C,+MW%3E" title="Debug">Debug</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block synthetic-implementation"><li><a href="#impl-Freeze-for-RateLimiter%3CK,+S,+C,+MW%3E" title="Freeze">Freeze</a></li><li><a href="#impl-RefUnwindSafe-for-RateLimiter%3CK,+S,+C,+MW%3E" title="RefUnwindSafe">RefUnwindSafe</a></li><li><a href="#impl-Send-for-RateLimiter%3CK,+S,+C,+MW%3E" title="Send">Send</a></li><li><a href="#impl-Sync-for-RateLimiter%3CK,+S,+C,+MW%3E" title="Sync">Sync</a></li><li><a href="#impl-Unpin-for-RateLimiter%3CK,+S,+C,+MW%3E" title="Unpin">Unpin</a></li><li><a href="#impl-UnwindSafe-for-RateLimiter%3CK,+S,+C,+MW%3E" title="UnwindSafe">UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block blanket-implementation"><li><a href="#impl-Any-for-T" title="Any">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-T" title="Borrow&#60;T&#62;">Borrow&#60;T&#62;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-T" title="BorrowMut&#60;T&#62;">BorrowMut&#60;T&#62;</a></li><li><a href="#impl-From%3CT%3E-for-T" title="From&#60;T&#62;">From&#60;T&#62;</a></li><li><a href="#impl-Into%3CU%3E-for-T" title="Into&#60;U&#62;">Into&#60;U&#62;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-T" title="TryFrom&#60;U&#62;">TryFrom&#60;U&#62;</a></li><li><a href="#impl-TryInto%3CU%3E-for-T" title="TryInto&#60;U&#62;">TryInto&#60;U&#62;</a></li><li><a href="#impl-VZip%3CV%3E-for-T" title="VZip&#60;V&#62;">VZip&#60;V&#62;</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate governor</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">governor</a></div><h1>Struct <span class="struct">Rate<wbr>Limiter</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/governor/state.rs.html#57-68">Source</a> </span></div><pre class="rust item-decl"><code>pub struct RateLimiter&lt;K, S, C, MW = <a class="struct" href="middleware/struct.NoOpMiddleware.html" title="struct governor::middleware::NoOpMiddleware">NoOpMiddleware</a>&gt;<div class="where">where
    S: <a class="trait" href="state/trait.StateStore.html" title="trait governor::state::StateStore">StateStore</a>&lt;Key = K&gt;,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,
    MW: <a class="trait" href="middleware/trait.RateLimitingMiddleware.html" title="trait governor::middleware::RateLimitingMiddleware">RateLimitingMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;,</div>{ <span class="comment">/* private fields */</span> }</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A rate limiter.</p>
<p>This is the structure that ties together the parameters (how many cells to allow in what time
period) and the concrete state of rate limiting decisions. This crate ships in-memory state
stores, but it’s possible (by implementing the <a href="state/trait.StateStore.html" title="trait governor::state::StateStore"><code>StateStore</code></a> trait) to make others.</p>
</div></details><h2 id="implementations" class="section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CNotKeyed,+S,+C,+MW%3E" class="impl"><a class="src rightside" href="../src/governor/state/direct/future.rs.html#15-98">Source</a><a href="#impl-RateLimiter%3CNotKeyed,+S,+C,+MW%3E" class="anchor">§</a><h3 class="code-header">impl&lt;S, C, MW&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;<a class="enum" href="state/direct/enum.NotKeyed.html" title="enum governor::state::direct::NotKeyed">NotKeyed</a>, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="state/direct/trait.DirectStateStore.html" title="trait governor::state::direct::DirectStateStore">DirectStateStore</a>,
    C: <a class="trait" href="clock/trait.ReasonablyRealtime.html" title="trait governor::clock::ReasonablyRealtime">ReasonablyRealtime</a>,
    MW: <a class="trait" href="middleware/trait.RateLimitingMiddleware.html" title="trait governor::middleware::RateLimitingMiddleware">RateLimitingMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>, NegativeOutcome = <a class="struct" href="struct.NotUntil.html" title="struct governor::NotUntil">NotUntil</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;&gt;,</div></h3><div class="docblock"><h4 id="direct-rate-limiters---asyncawait"><a class="doc-anchor" href="#direct-rate-limiters---asyncawait">§</a>Direct rate limiters - <code>async</code>/<code>await</code></h4></div></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.until_ready" class="method"><a class="src rightside" href="../src/governor/state/direct/future.rs.html#30-32">Source</a><h4 class="code-header">pub async fn <a href="#method.until_ready" class="fn">until_ready</a>(&amp;self) -&gt; MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a></h4></section></summary><div class="docblock"><p>Asynchronously resolves as soon as the rate limiter allows it.</p>
<p>When polled, the returned future either resolves immediately (in the case where the rate
limiter allows it), or else triggers an asynchronous delay, after which the rate limiter
is polled again. This means that the future might resolve at some later time (depending
on what other measurements are made on the rate limiter).</p>
<p>If multiple futures are dispatched against the rate limiter, it is advisable to use
<a href="#method.until_ready_with_jitter"><code>until_ready_with_jitter</code></a>, to avoid thundering herds.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.until_ready_with_jitter" class="method"><a class="src rightside" href="../src/governor/state/direct/future.rs.html#45-57">Source</a><h4 class="code-header">pub async fn <a href="#method.until_ready_with_jitter" class="fn">until_ready_with_jitter</a>(
    &amp;self,
    jitter: <a class="struct" href="struct.Jitter.html" title="struct governor::Jitter">Jitter</a>,
) -&gt; MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a></h4></section></summary><div class="docblock"><p>Asynchronously resolves as soon as the rate limiter allows it, with a randomized wait
period.</p>
<p>When polled, the returned future either resolves immediately (in the case where the rate
limiter allows it), or else triggers an asynchronous delay, after which the rate limiter
is polled again. This means that the future might resolve at some later time (depending
on what other measurements are made on the rate limiter).</p>
<p>This method allows for a randomized additional delay between polls of the rate limiter,
which can help reduce the likelihood of thundering herd effects if multiple tasks try to
wait on the same rate limiter.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.until_n_ready" class="method"><a class="src rightside" href="../src/governor/state/direct/future.rs.html#66-71">Source</a><h4 class="code-header">pub async fn <a href="#method.until_n_ready" class="fn">until_n_ready</a>(
    &amp;self,
    n: <a class="type" href="https://doc.rust-lang.org/nightly/core/num/nonzero/type.NonZeroU32.html" title="type core::num::nonzero::NonZeroU32">NonZeroU32</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a>, <a class="struct" href="struct.InsufficientCapacity.html" title="struct governor::InsufficientCapacity">InsufficientCapacity</a>&gt;</h4></section></summary><div class="docblock"><p>Asynchronously resolves as soon as the rate limiter allows it.</p>
<p>This is similar to <code>until_ready</code> except it waits for an abitrary number
of <code>n</code> cells to be available.</p>
<p>Returns <code>InsufficientCapacity</code> if the <code>n</code> provided exceeds the maximum
capacity of the rate limiter.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.until_n_ready_with_jitter" class="method"><a class="src rightside" href="../src/governor/state/direct/future.rs.html#81-97">Source</a><h4 class="code-header">pub async fn <a href="#method.until_n_ready_with_jitter" class="fn">until_n_ready_with_jitter</a>(
    &amp;self,
    n: <a class="type" href="https://doc.rust-lang.org/nightly/core/num/nonzero/type.NonZeroU32.html" title="type core::num::nonzero::NonZeroU32">NonZeroU32</a>,
    jitter: <a class="struct" href="struct.Jitter.html" title="struct governor::Jitter">Jitter</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a>, <a class="struct" href="struct.InsufficientCapacity.html" title="struct governor::InsufficientCapacity">InsufficientCapacity</a>&gt;</h4></section></summary><div class="docblock"><p>Asynchronously resolves as soon as the rate limiter allows it, with a
randomized wait period.</p>
<p>This is similar to <code>until_ready_with_jitter</code> except it waits for an
abitrary number of <code>n</code> cells to be available.</p>
<p>Returns <code>InsufficientCapacity</code> if the <code>n</code> provided exceeds the maximum
capacity of the rate limiter.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CNotKeyed,+InMemoryState,+QuantaClock%3E" class="impl"><a class="src rightside" href="../src/governor/state/direct.rs.html#41-49">Source</a><a href="#impl-RateLimiter%3CNotKeyed,+InMemoryState,+QuantaClock%3E" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;<a class="enum" href="state/direct/enum.NotKeyed.html" title="enum governor::state::direct::NotKeyed">NotKeyed</a>, <a class="struct" href="state/struct.InMemoryState.html" title="struct governor::state::InMemoryState">InMemoryState</a>, <a class="type" href="clock/type.DefaultClock.html" title="type governor::clock::DefaultClock">DefaultClock</a>, <a class="struct" href="middleware/struct.NoOpMiddleware.html" title="struct governor::middleware::NoOpMiddleware">NoOpMiddleware</a>&gt;</h3><div class="docblock"><h4 id="direct-in-memory-rate-limiters---constructors"><a class="doc-anchor" href="#direct-in-memory-rate-limiters---constructors">§</a>Direct in-memory rate limiters - Constructors</h4>
<p>Here we construct an in-memory rate limiter that makes direct (un-keyed)
rate-limiting decisions. Direct rate limiters can be used to
e.g. regulate the transmission of packets on a single connection,
or to ensure that an API client stays within a service’s rate
limit.</p>
</div></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.direct" class="method"><a class="src rightside" href="../src/governor/state/direct.rs.html#43-48">Source</a><h4 class="code-header">pub fn <a href="#method.direct" class="fn">direct</a>(
    quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>,
) -&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;<a class="enum" href="state/direct/enum.NotKeyed.html" title="enum governor::state::direct::NotKeyed">NotKeyed</a>, <a class="struct" href="state/struct.InMemoryState.html" title="struct governor::state::InMemoryState">InMemoryState</a>, <a class="type" href="clock/type.DefaultClock.html" title="type governor::clock::DefaultClock">DefaultClock</a>, <a class="struct" href="middleware/struct.NoOpMiddleware.html" title="struct governor::middleware::NoOpMiddleware">NoOpMiddleware</a>&gt;</h4></section></summary><div class="docblock"><p>Constructs a new in-memory direct rate limiter for a quota with the default real-time clock.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CNotKeyed,+InMemoryState,+C,+NoOpMiddleware%3C%3CC+as+Clock%3E::Instant%3E%3E" class="impl"><a class="src rightside" href="../src/governor/state/direct.rs.html#51-60">Source</a><a href="#impl-RateLimiter%3CNotKeyed,+InMemoryState,+C,+NoOpMiddleware%3C%3CC+as+Clock%3E::Instant%3E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;C&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;<a class="enum" href="state/direct/enum.NotKeyed.html" title="enum governor::state::direct::NotKeyed">NotKeyed</a>, <a class="struct" href="state/struct.InMemoryState.html" title="struct governor::state::InMemoryState">InMemoryState</a>, C, <a class="struct" href="middleware/struct.NoOpMiddleware.html" title="struct governor::middleware::NoOpMiddleware">NoOpMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;&gt;<div class="where">where
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.direct_with_clock" class="method"><a class="src rightside" href="../src/governor/state/direct.rs.html#56-59">Source</a><h4 class="code-header">pub fn <a href="#method.direct_with_clock" class="fn">direct_with_clock</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>, clock: C) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new direct rate limiter for a quota with a custom clock.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CNotKeyed,+S,+C,+MW%3E-1" class="impl"><a class="src rightside" href="../src/governor/state/direct.rs.html#63-109">Source</a><a href="#impl-RateLimiter%3CNotKeyed,+S,+C,+MW%3E-1" class="anchor">§</a><h3 class="code-header">impl&lt;S, C, MW&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;<a class="enum" href="state/direct/enum.NotKeyed.html" title="enum governor::state::direct::NotKeyed">NotKeyed</a>, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="state/direct/trait.DirectStateStore.html" title="trait governor::state::direct::DirectStateStore">DirectStateStore</a>,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,
    MW: <a class="trait" href="middleware/trait.RateLimitingMiddleware.html" title="trait governor::middleware::RateLimitingMiddleware">RateLimitingMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;,</div></h3><div class="docblock"><h4 id="direct-rate-limiters---manually-checking-cells"><a class="doc-anchor" href="#direct-rate-limiters---manually-checking-cells">§</a>Direct rate limiters - Manually checking cells</h4></div></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.check" class="method"><a class="src rightside" href="../src/governor/state/direct.rs.html#73-80">Source</a><h4 class="code-header">pub fn <a href="#method.check" class="fn">check</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a>, MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.NegativeOutcome" title="type governor::middleware::RateLimitingMiddleware::NegativeOutcome">NegativeOutcome</a>&gt;</h4></section></summary><div class="docblock"><p>Allow a single cell through the rate limiter.</p>
<p>If the rate limit is reached, <code>check</code> returns information about the earliest
time that a cell might be allowed through again.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.check_n" class="method"><a class="src rightside" href="../src/governor/state/direct.rs.html#96-108">Source</a><h4 class="code-header">pub fn <a href="#method.check_n" class="fn">check_n</a>(
    &amp;self,
    n: <a class="type" href="https://doc.rust-lang.org/nightly/core/num/nonzero/type.NonZeroU32.html" title="type core::num::nonzero::NonZeroU32">NonZeroU32</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a>, MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.NegativeOutcome" title="type governor::middleware::RateLimitingMiddleware::NegativeOutcome">NegativeOutcome</a>&gt;, <a class="struct" href="struct.InsufficientCapacity.html" title="struct governor::InsufficientCapacity">InsufficientCapacity</a>&gt;</h4></section></summary><div class="docblock"><p>Allow <em>only all</em> <code>n</code> cells through the rate limiter.</p>
<p>This method can succeed in only one way and fail in two ways:</p>
<ul>
<li>Success: If all <code>n</code> cells can be accommodated, it returns <code>Ok(())</code>.</li>
<li>Failure (but ok): Not all cells can make it through at the current time.
The result is <code>Err(NegativeMultiDecision::BatchNonConforming(NotUntil))</code>, which can
be interrogated about when the batch might next conform.</li>
<li>Failure (the batch can never go through): The rate limit quota’s burst size is too low
for the given number of cells to ever be allowed through.</li>
</ul>
<h6 id="performance"><a class="doc-anchor" href="#performance">§</a>Performance</h6>
<p>This method diverges a little from the GCRA algorithm, using
multiplication to determine the next theoretical arrival time, and so
is not as fast as checking a single cell.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+Mutex%3CRawMutex,+HashMap%3CK,+InMemoryState%3E%3E,+C,+NoOpMiddleware%3C%3CC+as+Clock%3E::Instant%3E%3E" class="impl"><a class="src rightside" href="../src/governor/state/keyed/hashmap.rs.html#71-81">Source</a><a href="#impl-RateLimiter%3CK,+Mutex%3CRawMutex,+HashMap%3CK,+InMemoryState%3E%3E,+C,+NoOpMiddleware%3C%3CC+as+Clock%3E::Instant%3E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, C&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, <a class="type" href="state/keyed/type.HashMapStateStore.html" title="type governor::state::keyed::HashMapStateStore">HashMapStateStore</a>&lt;K&gt;, C, <a class="struct" href="middleware/struct.NoOpMiddleware.html" title="struct governor::middleware::NoOpMiddleware">NoOpMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,</div></h3><div class="docblock"><h4 id="keyed-rate-limiters---hashmap-backed-with-a-default-hasher"><a class="doc-anchor" href="#keyed-rate-limiters---hashmap-backed-with-a-default-hasher">§</a>Keyed rate limiters - <a href="https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap"><code>HashMap</code></a></div></section></summary><div class="docblock">-backed with a default hasher</h4></div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.hashmap_with_clock" class="method"><a class="src rightside" href="../src/governor/state/keyed/hashmap.rs.html#77-80">Source</a><h4 class="code-header">pub fn <a href="#method.hashmap_with_clock" class="fn">hashmap_with_clock</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>, clock: C) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new rate limiter with a custom clock, backed by a <a href="https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap"><code>HashMap</code></a> with the default hasher.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+Mutex%3CRawMutex,+HashMap%3CK,+InMemoryState,+S%3E%3E,+C,+NoOpMiddleware%3C%3CC+as+Clock%3E::Instant%3E%3E" class="impl"><a class="src rightside" href="../src/governor/state/keyed/hashmap.rs.html#84-95">Source</a><a href="#impl-RateLimiter%3CK,+Mutex%3CRawMutex,+HashMap%3CK,+InMemoryState,+S%3E%3E,+C,+NoOpMiddleware%3C%3CC+as+Clock%3E::Instant%3E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, <a class="type" href="state/keyed/type.HashMapStateStore.html" title="type governor::state::keyed::HashMapStateStore">HashMapStateStore</a>&lt;K, S&gt;, C, <a class="struct" href="middleware/struct.NoOpMiddleware.html" title="struct governor::middleware::NoOpMiddleware">NoOpMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,
    S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.BuildHasher.html" title="trait core::hash::BuildHasher">BuildHasher</a>,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,</div></h3><div class="docblock"><h4 id="keyed-rate-limiters---hashmap-backed-with-a-custom-hasher"><a class="doc-anchor" href="#keyed-rate-limiters---hashmap-backed-with-a-custom-hasher">§</a>Keyed rate limiters - <a href="https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap"><code>HashMap</code></a></div></section></summary><div class="docblock">-backed with a custom hasher</h4></div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.hashmap_with_clock_and_hasher" class="method"><a class="src rightside" href="../src/governor/state/keyed/hashmap.rs.html#91-94">Source</a><h4 class="code-header">pub fn <a href="#method.hashmap_with_clock_and_hasher" class="fn">hashmap_with_clock_and_hasher</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>, clock: C, hasher: S) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new rate limiter with a custom clock and hasher, backed by a <a href="https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap"><code>HashMap</code></a>.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+DashMap%3CK,+InMemoryState%3E,+C,+NoOpMiddleware%3C%3CC+as+Clock%3E::Instant%3E%3E" class="impl"><a class="src rightside" href="../src/governor/state/keyed/dashmap.rs.html#36-47">Source</a><a href="#impl-RateLimiter%3CK,+DashMap%3CK,+InMemoryState%3E,+C,+NoOpMiddleware%3C%3CC+as+Clock%3E::Instant%3E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, C&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, <a class="type" href="state/keyed/type.DashMapStateStore.html" title="type governor::state::keyed::DashMapStateStore">DashMapStateStore</a>&lt;K&gt;, C, <a class="struct" href="middleware/struct.NoOpMiddleware.html" title="struct governor::middleware::NoOpMiddleware">NoOpMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,</div></h3><div class="docblock"><h4 id="keyed-rate-limiters---dashmap-backed-with-a-default-hasher"><a class="doc-anchor" href="#keyed-rate-limiters---dashmap-backed-with-a-default-hasher">§</a>Keyed rate limiters - <a href="../dashmap/struct.DashMap.html" title="struct dashmap::DashMap"><code>DashMap</code></a></div></section></summary><div class="docblock">-backed with a default hasher</h4></div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.dashmap_with_clock" class="method"><a class="src rightside" href="../src/governor/state/keyed/dashmap.rs.html#43-46">Source</a><h4 class="code-header">pub fn <a href="#method.dashmap_with_clock" class="fn">dashmap_with_clock</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>, clock: C) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new rate limiter with a custom clock, backed by a
<a href="../dashmap/struct.DashMap.html" title="struct dashmap::DashMap"><code>DashMap</code></a> with the default hasher.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+DashMap%3CK,+InMemoryState,+S%3E,+C,+NoOpMiddleware%3C%3CC+as+Clock%3E::Instant%3E%3E" class="impl"><a class="src rightside" href="../src/governor/state/keyed/dashmap.rs.html#50-62">Source</a><a href="#impl-RateLimiter%3CK,+DashMap%3CK,+InMemoryState,+S%3E,+C,+NoOpMiddleware%3C%3CC+as+Clock%3E::Instant%3E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, <a class="type" href="state/keyed/type.DashMapStateStore.html" title="type governor::state::keyed::DashMapStateStore">DashMapStateStore</a>&lt;K, S&gt;, C, <a class="struct" href="middleware/struct.NoOpMiddleware.html" title="struct governor::middleware::NoOpMiddleware">NoOpMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,
    S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.BuildHasher.html" title="trait core::hash::BuildHasher">BuildHasher</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,</div></h3><div class="docblock"><h4 id="keyed-rate-limiters---dashmap-backed-with-a-custom-hasher"><a class="doc-anchor" href="#keyed-rate-limiters---dashmap-backed-with-a-custom-hasher">§</a>Keyed rate limiters - <a href="../dashmap/struct.DashMap.html" title="struct dashmap::DashMap"><code>DashMap</code></a></div></section></summary><div class="docblock">-backed with a custom hasher</h4></div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.dashmap_with_clock_and_hasher" class="method"><a class="src rightside" href="../src/governor/state/keyed/dashmap.rs.html#58-61">Source</a><h4 class="code-header">pub fn <a href="#method.dashmap_with_clock_and_hasher" class="fn">dashmap_with_clock_and_hasher</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>, clock: C, hasher: S) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new rate limiter with a custom clock and hasher, backed by a
<a href="../dashmap/struct.DashMap.html" title="struct dashmap::DashMap"><code>DashMap</code></a>.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+S,+C,+MW%3E" class="impl"><a class="src rightside" href="../src/governor/state/keyed/future.rs.html#10-101">Source</a><a href="#impl-RateLimiter%3CK,+S,+C,+MW%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,
    S: <a class="trait" href="state/keyed/trait.KeyedStateStore.html" title="trait governor::state::keyed::KeyedStateStore">KeyedStateStore</a>&lt;K&gt;,
    C: <a class="trait" href="clock/trait.ReasonablyRealtime.html" title="trait governor::clock::ReasonablyRealtime">ReasonablyRealtime</a>,
    MW: <a class="trait" href="middleware/trait.RateLimitingMiddleware.html" title="trait governor::middleware::RateLimitingMiddleware">RateLimitingMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>, NegativeOutcome = <a class="struct" href="struct.NotUntil.html" title="struct governor::NotUntil">NotUntil</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;&gt;,</div></h3><div class="docblock"><h4 id="keyed-rate-limiters---asyncawait"><a class="doc-anchor" href="#keyed-rate-limiters---asyncawait">§</a>Keyed rate limiters - <code>async</code>/<code>await</code></h4></div></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.until_key_ready" class="method"><a class="src rightside" href="../src/governor/state/keyed/future.rs.html#26-28">Source</a><h4 class="code-header">pub async fn <a href="#method.until_key_ready" class="fn">until_key_ready</a>(&amp;self, key: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;K</a>) -&gt; MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a></h4></section></summary><div class="docblock"><p>Asynchronously resolves as soon as the rate limiter allows it.</p>
<p>When polled, the returned future either resolves immediately (in the case where the rate
limiter allows it), or else triggers an asynchronous delay, after which the rate limiter
is polled again. This means that the future might resolve at some later time (depending
on what other measurements are made on the rate limiter).</p>
<p>If multiple futures are dispatched against the rate limiter, it is advisable to use
<a href="#method.until_ready_with_jitter"><code>until_ready_with_jitter</code></a>, to avoid thundering herds.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.until_key_ready_with_jitter" class="method"><a class="src rightside" href="../src/governor/state/keyed/future.rs.html#41-57">Source</a><h4 class="code-header">pub async fn <a href="#method.until_key_ready_with_jitter" class="fn">until_key_ready_with_jitter</a>(
    &amp;self,
    key: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;K</a>,
    jitter: <a class="struct" href="struct.Jitter.html" title="struct governor::Jitter">Jitter</a>,
) -&gt; MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a></h4></section></summary><div class="docblock"><p>Asynchronously resolves as soon as the rate limiter allows it, with a randomized wait
period.</p>
<p>When polled, the returned future either resolves immediately (in the case where the rate
limiter allows it), or else triggers an asynchronous delay, after which the rate limiter
is polled again. This means that the future might resolve at some later time (depending
on what other measurements are made on the rate limiter).</p>
<p>This method allows for a randomized additional delay between polls of the rate limiter,
which can help reduce the likelihood of thundering herd effects if multiple tasks try to
wait on the same rate limiter.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.until_key_n_ready" class="method"><a class="src rightside" href="../src/governor/state/keyed/future.rs.html#66-73">Source</a><h4 class="code-header">pub async fn <a href="#method.until_key_n_ready" class="fn">until_key_n_ready</a>(
    &amp;self,
    key: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;K</a>,
    n: <a class="type" href="https://doc.rust-lang.org/nightly/core/num/nonzero/type.NonZeroU32.html" title="type core::num::nonzero::NonZeroU32">NonZeroU32</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a>, <a class="struct" href="struct.InsufficientCapacity.html" title="struct governor::InsufficientCapacity">InsufficientCapacity</a>&gt;</h4></section></summary><div class="docblock"><p>Asynchronously resolves as soon as the rate limiter allows it.</p>
<p>This is similar to <code>until_key_ready</code> except it waits for an abitrary number
of <code>n</code> cells to be available.</p>
<p>Returns <code>InsufficientCapacity</code> if the <code>n</code> provided exceeds the maximum
capacity of the rate limiter.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.until_key_n_ready_with_jitter" class="method"><a class="src rightside" href="../src/governor/state/keyed/future.rs.html#83-100">Source</a><h4 class="code-header">pub async fn <a href="#method.until_key_n_ready_with_jitter" class="fn">until_key_n_ready_with_jitter</a>(
    &amp;self,
    key: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;K</a>,
    n: <a class="type" href="https://doc.rust-lang.org/nightly/core/num/nonzero/type.NonZeroU32.html" title="type core::num::nonzero::NonZeroU32">NonZeroU32</a>,
    jitter: <a class="struct" href="struct.Jitter.html" title="struct governor::Jitter">Jitter</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a>, <a class="struct" href="struct.InsufficientCapacity.html" title="struct governor::InsufficientCapacity">InsufficientCapacity</a>&gt;</h4></section></summary><div class="docblock"><p>Asynchronously resolves as soon as the rate limiter allows it, with a
randomized wait period.</p>
<p>This is similar to <code>until_key_ready_with_jitter</code> except it waits for an
abitrary number of <code>n</code> cells to be available.</p>
<p>Returns <code>InsufficientCapacity</code> if the <code>n</code> provided exceeds the maximum
capacity of the rate limiter.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+DashMap%3CK,+InMemoryState%3E,+QuantaClock%3E" class="impl"><a class="src rightside" href="../src/governor/state/keyed.rs.html#42-70">Source</a><a href="#impl-RateLimiter%3CK,+DashMap%3CK,+InMemoryState%3E,+QuantaClock%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, <a class="type" href="state/keyed/type.DefaultKeyedStateStore.html" title="type governor::state::keyed::DefaultKeyedStateStore">DefaultKeyedStateStore</a>&lt;K&gt;, <a class="type" href="clock/type.DefaultClock.html" title="type governor::clock::DefaultClock">DefaultClock</a>&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a>,</div></h3><div class="docblock"><h4 id="keyed-rate-limiters---default-constructors"><a class="doc-anchor" href="#keyed-rate-limiters---default-constructors">§</a>Keyed rate limiters - default constructors</h4></div></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.keyed" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#48-52">Source</a><h4 class="code-header">pub fn <a href="#method.keyed" class="fn">keyed</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new keyed rate limiter backed by
the <a href="state/keyed/type.DefaultKeyedStateStore.html" title="type governor::state::keyed::DefaultKeyedStateStore"><code>DefaultKeyedStateStore</code></a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.dashmap" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#56-60">Source</a><h4 class="code-header">pub fn <a href="#method.dashmap" class="fn">dashmap</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new keyed rate limiter explicitly backed by a <a href="../dashmap/struct.DashMap.html" title="struct dashmap::DashMap"><code>DashMap</code></a>.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+DashMap%3CK,+InMemoryState,+S%3E,+QuantaClock%3E" class="impl"><a class="src rightside" href="../src/governor/state/keyed.rs.html#90-102">Source</a><a href="#impl-RateLimiter%3CK,+DashMap%3CK,+InMemoryState,+S%3E,+QuantaClock%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, <a class="type" href="state/keyed/type.DefaultKeyedStateStore.html" title="type governor::state::keyed::DefaultKeyedStateStore">DefaultKeyedStateStore</a>&lt;K, S&gt;, <a class="type" href="clock/type.DefaultClock.html" title="type governor::clock::DefaultClock">DefaultClock</a>&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a>,
    S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.BuildHasher.html" title="trait core::hash::BuildHasher">BuildHasher</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,</div></h3><div class="docblock"><h4 id="keyed-rate-limiters-with-custom-hashers"><a class="doc-anchor" href="#keyed-rate-limiters-with-custom-hashers">§</a>Keyed rate limiters with custom hashers</h4></div></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.dashmap_with_hasher" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#97-101">Source</a><h4 class="code-header">pub fn <a href="#method.dashmap_with_hasher" class="fn">dashmap_with_hasher</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>, hasher: S) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new keyed rate limiter explicitly backed by a
<a href="../dashmap/struct.DashMap.html" title="struct dashmap::DashMap"><code>DashMap</code></a> with a custom hasher.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+Mutex%3CRawMutex,+HashMap%3CK,+InMemoryState%3E%3E,+QuantaClock%3E" class="impl"><a class="src rightside" href="../src/governor/state/keyed.rs.html#105-116">Source</a><a href="#impl-RateLimiter%3CK,+Mutex%3CRawMutex,+HashMap%3CK,+InMemoryState%3E%3E,+QuantaClock%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, <a class="type" href="state/keyed/type.HashMapStateStore.html" title="type governor::state::keyed::HashMapStateStore">HashMapStateStore</a>&lt;K&gt;, <a class="type" href="clock/type.DefaultClock.html" title="type governor::clock::DefaultClock">DefaultClock</a>&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.hashmap" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#111-115">Source</a><h4 class="code-header">pub fn <a href="#method.hashmap" class="fn">hashmap</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new keyed rate limiter explicitly backed by a
<a href="https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap"><code>HashMap</code></a>.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+Mutex%3CRawMutex,+HashMap%3CK,+InMemoryState,+S%3E%3E,+QuantaClock%3E" class="impl"><a class="src rightside" href="../src/governor/state/keyed.rs.html#119-131">Source</a><a href="#impl-RateLimiter%3CK,+Mutex%3CRawMutex,+HashMap%3CK,+InMemoryState,+S%3E%3E,+QuantaClock%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, <a class="type" href="state/keyed/type.HashMapStateStore.html" title="type governor::state::keyed::HashMapStateStore">HashMapStateStore</a>&lt;K, S&gt;, <a class="type" href="clock/type.DefaultClock.html" title="type governor::clock::DefaultClock">DefaultClock</a>&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a>,
    S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.BuildHasher.html" title="trait core::hash::BuildHasher">BuildHasher</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.hashmap_with_hasher" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#126-130">Source</a><h4 class="code-header">pub fn <a href="#method.hashmap_with_hasher" class="fn">hashmap_with_hasher</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>, hasher: S) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new keyed rate limiter explicitly backed by a
<a href="https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap"><code>HashMap</code></a>.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+S,+C,+MW%3E-1" class="impl"><a class="src rightside" href="../src/governor/state/keyed.rs.html#134-181">Source</a><a href="#impl-RateLimiter%3CK,+S,+C,+MW%3E-1" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="state/keyed/trait.KeyedStateStore.html" title="trait governor::state::keyed::KeyedStateStore">KeyedStateStore</a>&lt;K&gt;,
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a>,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,
    MW: <a class="trait" href="middleware/trait.RateLimitingMiddleware.html" title="trait governor::middleware::RateLimitingMiddleware">RateLimitingMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;,</div></h3><div class="docblock"><h4 id="keyed-rate-limiters---manually-checking-cells"><a class="doc-anchor" href="#keyed-rate-limiters---manually-checking-cells">§</a>Keyed rate limiters - Manually checking cells</h4></div></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.check_key" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#145-152">Source</a><h4 class="code-header">pub fn <a href="#method.check_key" class="fn">check_key</a>(
    &amp;self,
    key: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;K</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a>, MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.NegativeOutcome" title="type governor::middleware::RateLimitingMiddleware::NegativeOutcome">NegativeOutcome</a>&gt;</h4></section></summary><div class="docblock"><p>Allow a single cell through the rate limiter for the given key.</p>
<p>If the rate limit is reached, <code>check_key</code> returns information about the earliest
time that a cell might be allowed through again under that key.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.check_key_n" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#168-180">Source</a><h4 class="code-header">pub fn <a href="#method.check_key_n" class="fn">check_key_n</a>(
    &amp;self,
    key: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;K</a>,
    n: <a class="type" href="https://doc.rust-lang.org/nightly/core/num/nonzero/type.NonZeroU32.html" title="type core::num::nonzero::NonZeroU32">NonZeroU32</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.PositiveOutcome" title="type governor::middleware::RateLimitingMiddleware::PositiveOutcome">PositiveOutcome</a>, MW::<a class="associatedtype" href="middleware/trait.RateLimitingMiddleware.html#associatedtype.NegativeOutcome" title="type governor::middleware::RateLimitingMiddleware::NegativeOutcome">NegativeOutcome</a>&gt;, <a class="struct" href="struct.InsufficientCapacity.html" title="struct governor::InsufficientCapacity">InsufficientCapacity</a>&gt;</h4></section></summary><div class="docblock"><p>Allow <em>only all</em> <code>n</code> cells through the rate limiter for the given key.</p>
<p>This method can succeed in only one way and fail in two ways:</p>
<ul>
<li>Success: If all <code>n</code> cells can be accommodated, it returns <code>Ok(Ok(()))</code>.</li>
<li>Failure (but ok): Not all cells can make it through at the current time.
The result is <code>Ok(Err(NotUntil))</code>, which can
be interrogated about when the batch might next conform.</li>
<li>Failure (the batch can never go through): The rate limit is too low for the given number
of cells. The result is <code>Err(InsufficientCapacity)</code></li>
</ul>
<h6 id="performance-1"><a class="doc-anchor" href="#performance-1">§</a>Performance</h6>
<p>This method diverges a little from the GCRA algorithm, using
multiplication to determine the next theoretical arrival time, and so
is not as fast as checking a single cell.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+S,+C,+MW%3E-2" class="impl"><a class="src rightside" href="../src/governor/state/keyed.rs.html#221-263">Source</a><a href="#impl-RateLimiter%3CK,+S,+C,+MW%3E-2" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="state/keyed/trait.ShrinkableKeyedStateStore.html" title="trait governor::state::keyed::ShrinkableKeyedStateStore">ShrinkableKeyedStateStore</a>&lt;K&gt;,
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a>,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,
    MW: <a class="trait" href="middleware/trait.RateLimitingMiddleware.html" title="trait governor::middleware::RateLimitingMiddleware">RateLimitingMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;,</div></h3><div class="docblock"><h4 id="keyed-rate-limiters---housekeeping"><a class="doc-anchor" href="#keyed-rate-limiters---housekeeping">§</a>Keyed rate limiters - Housekeeping</h4>
<p>As the inputs to a keyed rate-limiter can be arbitrary keys, the set of retained keys retained
grows, while the number of active keys may stay smaller. To save on space, a keyed rate-limiter
allows removing those keys that are “stale”, i.e., whose values are no different from keys’ that
aren’t present in the rate limiter state store.</p>
</div></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.retain_recent" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#232-240">Source</a><h4 class="code-header">pub fn <a href="#method.retain_recent" class="fn">retain_recent</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Retains all keys in the rate limiter that were used recently enough.</p>
<p>Any key whose rate limiting state is indistinguishable from a “fresh” state (i.e., the
theoretical arrival time lies in the past).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.shrink_to_fit" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#243-245">Source</a><h4 class="code-header">pub fn <a href="#method.shrink_to_fit" class="fn">shrink_to_fit</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Shrinks the capacity of the rate limiter’s state store, if possible.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.len" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#251-253">Source</a><h4 class="code-header">pub fn <a href="#method.len" class="fn">len</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Returns the number of “live” keys in the rate limiter’s state store.</p>
<p>Depending on how the state store is implemented, this may
return an estimate or an out-of-date result.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_empty" class="method"><a class="src rightside" href="../src/governor/state/keyed.rs.html#260-262">Source</a><h4 class="code-header">pub fn <a href="#method.is_empty" class="fn">is_empty</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Returns <code>true</code> if the rate limiter has no keys in it.</p>
<p>As with <a href="#method.len"><code>len</code></a>, this method may return
imprecise results (indicating that the state store is empty
while a concurrent rate-limiting operation is taking place).</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+S,+C,+MW%3E-3" class="impl"><a class="src rightside" href="../src/governor/state.rs.html#70-103">Source</a><a href="#impl-RateLimiter%3CK,+S,+C,+MW%3E-3" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="state/trait.StateStore.html" title="trait governor::state::StateStore">StateStore</a>&lt;Key = K&gt;,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,
    MW: <a class="trait" href="middleware/trait.RateLimitingMiddleware.html" title="trait governor::middleware::RateLimitingMiddleware">RateLimitingMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new" class="method"><a class="src rightside" href="../src/governor/state.rs.html#80-90">Source</a><h4 class="code-header">pub fn <a href="#method.new" class="fn">new</a>(quota: <a class="struct" href="struct.Quota.html" title="struct governor::Quota">Quota</a>, state: S, clock: C) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a new rate limiter from components.</p>
<p>This is the most generic way to construct a rate-limiter; most users should prefer
<a href="state/direct/index.html" title="mod governor::state::direct"><code>direct</code></a> or other methods instead.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.into_state_store" class="method"><a class="src rightside" href="../src/governor/state.rs.html#95-97">Source</a><h4 class="code-header">pub fn <a href="#method.into_state_store" class="fn">into_state_store</a>(self) -&gt; S</h4></section></summary><div class="docblock"><p>Consumes the <code>RateLimiter</code> and returns the state store.</p>
<p>This is mostly useful for debugging and testing.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.clock" class="method"><a class="src rightside" href="../src/governor/state.rs.html#100-102">Source</a><h4 class="code-header">pub fn <a href="#method.clock" class="fn">clock</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;C</a></h4></section></summary><div class="docblock"><p>Returns a reference to the clock.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-RateLimiter%3CK,+S,+C,+MW%3E-4" class="impl"><a class="src rightside" href="../src/governor/state.rs.html#105-123">Source</a><a href="#impl-RateLimiter%3CK,+S,+C,+MW%3E-4" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="state/trait.StateStore.html" title="trait governor::state::StateStore">StateStore</a>&lt;Key = K&gt;,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>,
    MW: <a class="trait" href="middleware/trait.RateLimitingMiddleware.html" title="trait governor::middleware::RateLimitingMiddleware">RateLimitingMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.with_middleware" class="method"><a class="src rightside" href="../src/governor/state.rs.html#112-122">Source</a><h4 class="code-header">pub fn <a href="#method.with_middleware" class="fn">with_middleware</a>&lt;Outer: <a class="trait" href="middleware/trait.RateLimitingMiddleware.html" title="trait governor::middleware::RateLimitingMiddleware">RateLimitingMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt;&gt;(
    self,
) -&gt; <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, Outer&gt;</h4></section></summary><div class="docblock"><p>Convert the given rate limiter into one that uses a different middleware.</p>
</div></details></div></details></div><h2 id="trait-implementations" class="section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Debug-for-RateLimiter%3CK,+S,+C,+MW%3E" class="impl"><a class="src rightside" href="../src/governor/state.rs.html#56">Source</a><a href="#impl-Debug-for-RateLimiter%3CK,+S,+C,+MW%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>, S, C, MW&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="state/trait.StateStore.html" title="trait governor::state::StateStore">StateStore</a>&lt;Key = K&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,
    C: <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,
    MW: <a class="trait" href="middleware/trait.RateLimitingMiddleware.html" title="trait governor::middleware::RateLimitingMiddleware">RateLimitingMiddleware</a>&lt;C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,
    C::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl"><a class="src rightside" href="../src/governor/state.rs.html#56">Source</a><a href="#method.fmt" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class='docblock'>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></div></details></div></details></div><h2 id="synthetic-implementations" class="section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-Freeze-for-RateLimiter%3CK,+S,+C,+MW%3E" class="impl"><a href="#impl-Freeze-for-RateLimiter%3CK,+S,+C,+MW%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Freeze.html" title="trait core::marker::Freeze">Freeze</a> for <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Freeze.html" title="trait core::marker::Freeze">Freeze</a>,
    C: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Freeze.html" title="trait core::marker::Freeze">Freeze</a>,
    &lt;C as <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>&gt;::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Freeze.html" title="trait core::marker::Freeze">Freeze</a>,</div></h3></section><section id="impl-RefUnwindSafe-for-RateLimiter%3CK,+S,+C,+MW%3E" class="impl"><a href="#impl-RefUnwindSafe-for-RateLimiter%3CK,+S,+C,+MW%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a>,
    C: <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a>,
    &lt;C as <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>&gt;::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a>,
    MW: <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a>,</div></h3></section><section id="impl-Send-for-RateLimiter%3CK,+S,+C,+MW%3E" class="impl"><a href="#impl-Send-for-RateLimiter%3CK,+S,+C,+MW%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,
    C: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,
    MW: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,</div></h3></section><section id="impl-Sync-for-RateLimiter%3CK,+S,+C,+MW%3E" class="impl"><a href="#impl-Sync-for-RateLimiter%3CK,+S,+C,+MW%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,
    C: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,
    MW: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,</div></h3></section><section id="impl-Unpin-for-RateLimiter%3CK,+S,+C,+MW%3E" class="impl"><a href="#impl-Unpin-for-RateLimiter%3CK,+S,+C,+MW%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,
    C: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,
    &lt;C as <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>&gt;::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,
    MW: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,</div></h3></section><section id="impl-UnwindSafe-for-RateLimiter%3CK,+S,+C,+MW%3E" class="impl"><a href="#impl-UnwindSafe-for-RateLimiter%3CK,+S,+C,+MW%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, S, C, MW&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.RateLimiter.html" title="struct governor::RateLimiter">RateLimiter</a>&lt;K, S, C, MW&gt;<div class="where">where
    S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a>,
    C: <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a>,
    &lt;C as <a class="trait" href="clock/trait.Clock.html" title="trait governor::clock::Clock">Clock</a>&gt;::<a class="associatedtype" href="clock/trait.Clock.html#associatedtype.Instant" title="type governor::clock::Clock::Instant">Instant</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a>,
    MW: <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a>,</div></h3></section></div><h2 id="blanket-implementations" class="section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#138">Source</a><a href="#impl-Any-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<div class="where">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#139">Source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#212">Source</a><a href="#impl-Borrow%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#214">Source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#221">Source</a><a href="#impl-BorrowMut%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#222">Source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#785">Source</a><a href="#impl-From%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#788">Source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#767-769">Source</a><a href="#impl-Into%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#777">Source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#827-829">Source</a><a href="#impl-TryFrom%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#831">Source</a><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#834">Source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#811-813">Source</a><a href="#impl-TryInto%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#815">Source</a><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#818">Source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-VZip%3CV%3E-for-T" class="impl"><a class="src rightside" href="../src/ppv_lite86/types.rs.html#221-223">Source</a><a href="#impl-VZip%3CV%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;V, T&gt; <a class="trait" href="../ppv_lite86/types/trait.VZip.html" title="trait ppv_lite86::types::VZip">VZip</a>&lt;V&gt; for T<div class="where">where
    V: <a class="trait" href="../ppv_lite86/types/trait.MultiLane.html" title="trait ppv_lite86::types::MultiLane">MultiLane</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><section id="method.vzip" class="method trait-impl"><a class="src rightside" href="../src/ppv_lite86/types.rs.html#226">Source</a><a href="#method.vzip" class="anchor">§</a><h4 class="code-header">fn <a href="../ppv_lite86/types/trait.VZip.html#tymethod.vzip" class="fn">vzip</a>(self) -&gt; V</h4></section></div></details></div></section></div></main></body></html>